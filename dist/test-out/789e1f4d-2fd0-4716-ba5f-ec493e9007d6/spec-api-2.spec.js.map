{
  "version": 3,
  "sources": ["angular:jit:template:src\\app\\routes\\api\\api.html", "angular:jit:style:src\\app\\routes\\api\\api.css", "src/app/routes/api/api.ts", "src/app/routes/api/api.spec.ts"],
  "sourcesContent": ["<h2>User Management</h2>\r\n\r\n<!-- Add User Form -->\r\n<form class=\" flex flex-col gap-5 p-10 w-1/3 \" [formGroup]=\"userForm\" (ngSubmit)=\"onSubmit()\">\r\n    <input class=\" border p-2  \" formControlName=\"name\" placeholder=\"Name\" />\r\n    <input class=\" border p-2  \" formControlName=\"email\" placeholder=\"Email\" type=\"email\" />\r\n    <input class=\" border p-2  \" formControlName=\"password\" placeholder=\"Password\" type=\"password\" />\r\n    <button class=\" border \" type=\"submit\" [disabled]=\"userForm.invalid\">Add User</button>\r\n</form>\r\n\r\n\r\n<div class=\" flex justify-center items-center \">\r\n    <hr class=\" w-10/12 \" />\r\n</div>\r\n\r\n<button class=\" border \" (click)=\"loadUsers()\">Fetch Users</button>\r\n\r\n<ul>\r\n    @for (u of user; track u.id) {\r\n    <li>\r\n        <strong>ID:</strong> {{ u.id }} |\r\n        <strong>Name:</strong> {{ u.name }} |\r\n        <strong>Email:</strong> {{ u.email }} |\r\n        <strong>Password:</strong> {{ u.password }}\r\n        <button (click)=\"removeUser(u.id)\">Delete</button>\r\n    </li>\r\n    }\r\n</ul>", "/* src/app/routes/api/api.css */\n/*# sourceMappingURL=api.css.map */\n", "import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators,ReactiveFormsModule } from '@angular/forms';\r\nimport { Api } from '../../services/api';\r\nimport { SlimUser } from '../../interfaces/users';\r\n\r\n\r\n@Component({\r\n  selector: 'app-api',\r\n  imports: [ReactiveFormsModule],\r\n  templateUrl: './api.html',\r\n  styleUrls: ['./api.css']\r\n})\r\nexport class API implements OnInit {\r\n  user: SlimUser[] = [];\r\n  userForm!: FormGroup;\r\n\r\n  constructor(private api: Api, private fb: FormBuilder) { }\r\n\r\n  ngOnInit(): void {\r\n    this.userForm = this.fb.group({\r\n      name: ['', Validators.required],\r\n      email: ['', [Validators.required, Validators.email]],\r\n      password: ['', Validators.required]\r\n    });\r\n    this.loadUsers();\r\n  }\r\n\r\n  loadUsers() {\r\n    this.api.getUser().subscribe((data: any) => {\r\n      this.user = data.map((u: { id: any; name: any; email: any; password: any; }) => ({\r\n        id: u.id,\r\n        name: u.name,\r\n        email: u.email,\r\n        password: u.password\r\n      }));\r\n    });\r\n  }\r\n\r\n  onSubmit() {\r\n    if (this.userForm.valid) {\r\n      const newId =\r\n        this.user.length > 0\r\n          ? Math.max(...this.user.map((u) => u.id)) + 1\r\n          : 1;\r\n\r\n      const newUser: any = {\r\n        id: newId,\r\n        ...(this.userForm.value as Omit<SlimUser, 'id'>)  // ðŸ‘ˆ CAST here\r\n      };\r\n\r\n      this.api.addUser(newUser).subscribe(() => {\r\n        console.log('User added:', newUser);\r\n        this.user.push(newUser);  // ðŸ‘Œ No more error\r\n        this.userForm.reset();\r\n      });\r\n    }\r\n  }\r\n\r\n  removeUser(id: number) {\r\n    this.api.deleteUser(id).subscribe(() => {\r\n      console.log(`User with id=${id} deleted`);\r\n      this.user = this.user.filter((u: { id: number; }) => u.id !== id);\r\n    });\r\n  }\r\n\r\n\r\n}\r\n", "import { ComponentFixture, TestBed, fakeAsync, tick } from '@angular/core/testing';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { of } from 'rxjs';\r\n\r\nimport { API } from './api';\r\nimport { Api } from '../../services/api';\r\nimport { SlimUser } from '../../interfaces/users';\r\n\r\n// Note: Using 'describe' instead of 'fdescribe' to allow all tests to run.\r\ndescribe('API Component', () => {\r\n  let component: API;\r\n  let fixture: ComponentFixture<API>;\r\n  let apiServiceSpy: jasmine.SpyObj<Api>;\r\n\r\n  const mockUsers: SlimUser[] = [\r\n    { id: 1, name: 'John Doe', email: 'john@test.com', password: 'password1' },\r\n    { id: 2, name: 'Jane Smith', email: 'jane@test.com', password: 'password2' }\r\n  ];\r\n\r\n  beforeEach(async () => {\r\n    const spy = jasmine.createSpyObj('Api', ['getUser', 'addUser', 'deleteUser']);\r\n\r\n    await TestBed.configureTestingModule({\r\n      // âœ… FIX: For standalone components, add the component and its\r\n      // module dependencies directly to the 'imports' array.\r\n      imports: [API, ReactiveFormsModule],\r\n      providers: [\r\n        { provide: Api, useValue: spy }\r\n      ]\r\n    }).compileComponents();\r\n\r\n    fixture = TestBed.createComponent(API);\r\n    component = fixture.componentInstance;\r\n    apiServiceSpy = TestBed.inject(Api) as jasmine.SpyObj<Api>;\r\n  });\r\n\r\n  it('should create', () => {\r\n    expect(component).toBeTruthy();\r\n  });\r\n\r\n  it('should initialize the form and load users on ngOnInit', fakeAsync(() => {\r\n    // Arrange\r\n    apiServiceSpy.getUser.and.returnValue(of(mockUsers));\r\n\r\n    // Act\r\n    fixture.detectChanges(); // Triggers ngOnInit\r\n    tick(); // Resolves the observable\r\n\r\n    // Assert\r\n    expect(component.userForm).toBeDefined();\r\n    expect(component.user.length).toBe(2);\r\n    expect(apiServiceSpy.getUser).toHaveBeenCalledTimes(1);\r\n  }));\r\n\r\n  it('should NOT call addUser if the form is invalid', () => {\r\n    // Arrange: The form is invalid by default\r\n    // Act\r\n    component.onSubmit();\r\n    // Assert\r\n    expect(apiServiceSpy.addUser).not.toHaveBeenCalled();\r\n  });\r\n\r\n  it('should call addUser, update list, and reset form when valid', fakeAsync(() => {\r\n    // Arrange\r\n    const newUser: SlimUser = { id: 3, name: 'New User', email: 'new@test.com', password: 'newpassword' };\r\n    apiServiceSpy.addUser.and.returnValue(of(newUser));\r\n    component.user = [...mockUsers]; // Set initial state\r\n    component.userForm.setValue({ name: 'New User', email: 'new@test.com', password: 'newpassword' });\r\n    \r\n    // Act\r\n    component.onSubmit();\r\n    tick();\r\n\r\n    // Assert\r\n    expect(apiServiceSpy.addUser).toHaveBeenCalledTimes(1);\r\n    \r\n    const actualUserSentToApi = apiServiceSpy.addUser.calls.first().args[0] as any as SlimUser;\r\n    expect(actualUserSentToApi.name).toBe('New User');\r\n    \r\n    expect(component.user.length).toBe(3);\r\n    expect(component.userForm.value.name).toBeNull();\r\n  }));\r\n\r\n  it('should call deleteUser and filter the user list', fakeAsync(() => {\r\n    // Arrange\r\n    const idToRemove = 1;\r\n    apiServiceSpy.deleteUser.and.returnValue(of([])); // Mock successful deletion\r\n    component.user = [...mockUsers]; // Set initial state\r\n    \r\n    // Act\r\n    component.removeUser(idToRemove);\r\n    tick();\r\n\r\n    // Assert\r\n    expect(apiServiceSpy.deleteUser).toHaveBeenCalledOnceWith(idToRemove);\r\n    expect(component.user.length).toBe(1);\r\n    expect(component.user.find(u => u.id === idToRemove)).toBeUndefined();\r\n  }));\r\n});"],
  "mappings": "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",
  "names": ["init_api", "api_default", "init_api", "cov_1fxtiklrag", "actualCoverage", "API", "s", "api", "fb", "user", "userForm", "constructor", "f", "ngOnInit", "group", "name", "Validators", "required", "email", "password", "loadUsers", "getUser", "subscribe", "data", "map", "u", "id", "onSubmit", "valid", "b", "newId", "length", "Math", "max", "newUser", "value", "addUser", "console", "log", "push", "reset", "removeUser", "deleteUser", "filter", "__decorate", "Component", "selector", "imports", "ReactiveFormsModule", "template", "__NG_CLI_RESOURCE__0", "init_api"]
}
