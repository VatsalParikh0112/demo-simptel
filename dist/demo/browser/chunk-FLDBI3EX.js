import{i as h,j as C,m as A,n as l,o as E,p as N,t as P,u as j,v as k,w as O,y as D}from"./chunk-A4SC5FUV.js";import{$a as p,Ba as x,O as v,Sa as w,T as I,Ta as U,Ua as f,Va as i,Wa as s,Xa as b,Y as _,Z as S,_a as F,a as g,bb as y,eb as r,gb as m,sa as a,wa as c}from"./chunk-EPXFW6MZ.js";var d=class n{url="https://jsonplaceholder.typicode.com/users?_limit=3";http=I(C);getUser(){return this.http.get(this.url)}getUserById(t){let e=new h().set("id",t.toString());return this.http.get(this.url,{params:e})}addUser(t){return this.http.post(this.url,t)}deleteUser(t){let e=new h().set("id",t.toString());return this.http.get(this.url,{params:e})}static \u0275fac=function(e){return new(e||n)};static \u0275prov=v({token:n,factory:n.\u0275fac,providedIn:"root"})};var B=(n,t)=>t.id;function $(n,t){if(n&1){let e=F();i(0,"li")(1,"strong"),r(2,"ID:"),s(),r(3),i(4,"strong"),r(5,"Name:"),s(),r(6),i(7,"strong"),r(8,"Email:"),s(),r(9),i(10,"strong"),r(11,"Password:"),s(),r(12),i(13,"button",8),p("click",function(){let u=_(e).$implicit,T=y();return S(T.removeUser(u.id))}),r(14,"Delete"),s()()}if(n&2){let e=t.$implicit;a(3),m(" ",e.id," | "),a(3),m(" ",e.name," | "),a(3),m(" ",e.email," | "),a(3),m(" ",e.password," ")}}var G=class n{constructor(t,e){this.fb=t;this.api=e}user=[];userForm;ngOnInit(){this.userForm=this.fb.group({name:["",l.required],email:["",[l.required,l.email]],password:["",l.required]}),this.loadUsers()}loadUsers(){this.api.getUser().subscribe(t=>{this.user=t.map(e=>({id:e.id,name:e.name,email:e.email,password:e.password}))})}onSubmit(){if(this.userForm.valid){let t=this.user.length>0?Math.max(...this.user.map(o=>o.id))+1:1,e=g({id:t},this.userForm.value);this.api.addUser(e).subscribe(()=>{console.log("User added:",e),this.user.push(e),this.userForm.reset()})}}removeUser(t){this.api.deleteUser(t).subscribe(()=>{console.log(`User with id=${t} deleted`),this.user=this.user.filter(e=>e.id!==t)})}static \u0275fac=function(e){return new(e||n)(c(O),c(d))};static \u0275cmp=x({type:n,selectors:[["app-api"]],decls:15,vars:2,consts:[[1,"flex","flex-col","gap-5","p-10","w-1/3",3,"ngSubmit","formGroup"],["formControlName","name","placeholder","Name",1,"border","p-2"],["formControlName","email","placeholder","Email","type","email",1,"border","p-2"],["formControlName","password","placeholder","Password","type","password",1,"border","p-2"],["type","submit",1,"border",3,"disabled"],[1,"flex","justify-center","items-center"],[1,"w-10/12"],[1,"border",3,"click"],[3,"click"]],template:function(e,o){e&1&&(i(0,"h2"),r(1,"User Management"),s(),i(2,"form",0),p("ngSubmit",function(){return o.onSubmit()}),b(3,"input",1)(4,"input",2)(5,"input",3),i(6,"button",4),r(7,"Add User"),s()(),i(8,"div",5),b(9,"hr",6),s(),i(10,"button",7),p("click",function(){return o.loadUsers()}),r(11,"Fetch Users"),s(),i(12,"ul"),w(13,$,15,4,"li",null,B),s()),e&2&&(a(2),f("formGroup",o.userForm),a(4),f("disabled",o.userForm.invalid),a(7),U(o.user))},dependencies:[D,P,A,E,N,j,k],encapsulation:2})};export{G as API};
