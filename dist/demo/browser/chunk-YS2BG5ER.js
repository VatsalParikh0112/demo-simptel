import{i as h,j as C,l as A,m,n as E,o as N,s as P,t as k,u as O,v as j,x as D}from"./chunk-MYHBTIJV.js";import{Ma as w,N as g,Na as U,Oa as f,Pa as i,Qa as s,R as _,Ra as b,Ua as y,Va as p,X as I,Xa as F,Y as S,_a as r,a as v,ab as l,pa as a,ta as c,xa as x}from"./chunk-JLB4H2CN.js";var d=class n{constructor(t){this.http=t}url="https://jsonplaceholder.typicode.com/users?_limit=3";getUser(){return this.http.get(this.url)}getUserById(t){let e=new h().set("id",t.toString());return this.http.get(this.url,{params:e})}addUser(t){return this.http.post(this.url,t)}deleteUser(t){let e=new h().set("id",t.toString());return this.http.get(this.url,{params:e})}static \u0275fac=function(e){return new(e||n)(_(C))};static \u0275prov=g({token:n,factory:n.\u0275fac,providedIn:"root"})};var B=(n,t)=>t.id;function H(n,t){if(n&1){let e=y();i(0,"li")(1,"strong"),r(2,"ID:"),s(),r(3),i(4,"strong"),r(5,"Name:"),s(),r(6),i(7,"strong"),r(8,"Email:"),s(),r(9),i(10,"strong"),r(11,"Password:"),s(),r(12),i(13,"button",8),p("click",function(){let u=I(e).$implicit,T=F();return S(T.removeUser(u.id))}),r(14,"Delete"),s()()}if(n&2){let e=t.$implicit;a(3),l(" ",e.id," | "),a(3),l(" ",e.name," | "),a(3),l(" ",e.email," | "),a(3),l(" ",e.password," ")}}var G=class n{constructor(t,e){this.api=t;this.fb=e}user=[];userForm;ngOnInit(){this.userForm=this.fb.group({name:["",m.required],email:["",[m.required,m.email]],password:["",m.required]}),this.loadUsers()}loadUsers(){this.api.getUser().subscribe(t=>{this.user=t.map(e=>({id:e.id,name:e.name,email:e.email,password:e.password}))})}onSubmit(){if(this.userForm.valid){let t=this.user.length>0?Math.max(...this.user.map(o=>o.id))+1:1,e=v({id:t},this.userForm.value);this.api.addUser(e).subscribe(()=>{console.log("User added:",e),this.user.push(e),this.userForm.reset()})}}removeUser(t){this.api.deleteUser(t).subscribe(()=>{console.log(`User with id=${t} deleted`),this.user=this.user.filter(e=>e.id!==t)})}static \u0275fac=function(e){return new(e||n)(c(d),c(j))};static \u0275cmp=x({type:n,selectors:[["app-api"]],decls:15,vars:2,consts:[[1,"flex","flex-col","gap-5","p-10","w-1/3",3,"ngSubmit","formGroup"],["formControlName","name","placeholder","Name",1,"border","p-2"],["formControlName","email","placeholder","Email","type","email",1,"border","p-2"],["formControlName","password","placeholder","Password","type","password",1,"border","p-2"],["type","submit",1,"border",3,"disabled"],[1,"flex","justify-center","items-center"],[1,"w-10/12"],[1,"border",3,"click"],[3,"click"]],template:function(e,o){e&1&&(i(0,"h2"),r(1,"User Management"),s(),i(2,"form",0),p("ngSubmit",function(){return o.onSubmit()}),b(3,"input",1)(4,"input",2)(5,"input",3),i(6,"button",4),r(7,"Add User"),s()(),i(8,"div",5),b(9,"hr",6),s(),i(10,"button",7),p("click",function(){return o.loadUsers()}),r(11,"Fetch Users"),s(),i(12,"ul"),w(13,H,15,4,"li",null,B),s()),e&2&&(a(2),f("formGroup",o.userForm),a(4),f("disabled",o.userForm.invalid),a(7),U(o.user))},dependencies:[D,P,A,E,N,k,O],encapsulation:2})};export{G as API};
